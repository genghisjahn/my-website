<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{{ .Title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
    {{template "feeds"}}
    {{template "webmention"}}
    <link rel="me" href="mailto:jon@jonwear.com">
    <link rel="me" href="https://route66.social/@Jon">
    {{template "styles"}}
    {{template "favicons"}}
    <link rel="manifest" href="/site.webmanifest?v=1">
    <meta name="theme-color" content="#0a0e1a">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="{{ .Title }}">
    <meta property="og:site_name" content="jonwear.com">
    <meta property="og:image" content="https://jonwear.com/images/og-default.png">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ .Title }}">
    <meta name="twitter:image" content="https://jonwear.com/images/og-default.png">
</head>
<body>
  <div class="wrap">
    <div class="crt">
      <header>
        <h1>{{ .Title }}</h1>
        {{- if .Subtitle }}<p class="byline"><a href='mailto:{{ .Subtitle }}'>{{ .Subtitle }}</a></p>{{ end }}
      </header>
      <div class="rule" aria-hidden="true"></div>
      {{template "theme-toggle"}}
      <nav class="site-nav">
        {{template "nav"}}
      </nav>
      <div class="panel">
          <strong>Day of Year:</strong>
          <div class="meter" aria-label="Day of Year"><span id="dayOfYearBar"></span></div>
          <div id="dayOfYearText" style="margin-top:6px;font-size:.9rem;color:var(--muted)"></div>
          <script>
            (function(){
              const now = new Date();
              const start = new Date(now.getFullYear(), 0, 0);
              const diff = (now - start) + ((start.getTimezoneOffset() - now.getTimezoneOffset()) * 60 * 1000);
              const oneDay = 1000 * 60 * 60 * 24;
              const day = Math.floor(diff / oneDay);
              const isLeap = (new Date(now.getFullYear(), 1, 29).getMonth() === 1);
              const maxDays = isLeap ? 366 : 365;
              const pct = (day / maxDays) * 100;
              document.getElementById('dayOfYearBar').style.width = pct + '%';
              document.getElementById('dayOfYearBar').style.background = 'linear-gradient(90deg,var(--cyan),var(--mag))';
              document.getElementById('dayOfYearText').textContent = `Day ${day} of ${maxDays}`;
            })();
          </script>
        </div>
      <article>
        <ul>
          {{- range .Items }}
          <li><time datetime="{{ .ISODate }}">{{ .HumanDate }}</time> Â· {{ if eq .Type "note" }}<span class="type-badge">note</span> {{ end }}<a href="{{ .URL }}">{{ .Title }}</a></li>
          {{- end }}
        </ul>
      </article>
      <footer>
        {{template "nav"}}
      </footer>
    </div>
  </div>
</body>
</html>
